<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="../favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="../favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../favicon-16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
  <title>BMRI æŒ‡æ ‡ â€” Crypto3D</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Noto+Sans+SC:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lightweight-charts@4/dist/lightweight-charts.standalone.production.js"></script>
  <style>
    :root {
      --bg-primary: #0a0a0b;
      --bg-secondary: #111113;
      --bg-tertiary: #18181b;
      --bg-hover: #1f1f23;
      --border: #27272a;
      --border-hover: #3f3f46;
      --text-primary: #fafafa;
      --text-secondary: #a1a1aa;
      --text-tertiary: #71717a;
      --accent: #22c55e;
      --accent-dim: rgba(34, 197, 94, 0.1);
      --warning: #f59e0b;
      --warning-dim: rgba(245, 158, 11, 0.1);
      --danger: #ef4444;
      --danger-dim: rgba(239, 68, 68, 0.1);
      --blue: #3b82f6;
      --blue-dim: rgba(59, 130, 246, 0.1);
      --purple: #a855f7;
      --cyan: #06b6d4;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Noto Sans SC', 'Inter', -apple-system, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
    }

    /* Header */
    header {
      border-bottom: 1px solid var(--border);
      padding: 20px 0;
      position: sticky;
      top: 0;
      background: rgba(10, 10, 11, 0.9);
      backdrop-filter: blur(12px);
      z-index: 100;
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
    }

    .logo-icon { width: 36px; height: 36px; border-radius: 8px; }

    .logo-text {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 24px;
    }

    .nav-links a {
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 14px;
      transition: color 0.2s;
    }

    .nav-links a:hover {
      color: var(--text-primary);
    }

    .lang-switch {
      display: flex;
      align-items: center;
      gap: 8px;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 6px 12px;
      cursor: pointer;
      font-size: 14px;
    }

    .lang-switch span { color: var(--text-secondary); }
    .lang-switch .active { color: var(--text-primary); font-weight: 500; }

    /* Main Content */
    main {
      padding: 40px 0;
    }

    .page-header {
      margin-bottom: 24px;
    }

    .page-title {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .page-subtitle {
      color: var(--text-secondary);
      font-size: 16px;
    }

    /* Version Tabs */
    .version-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 24px;
    }

    .version-tab {
      padding: 10px 24px;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      color: var(--text-secondary);
      transition: all 0.2s;
    }

    .version-tab:hover {
      border-color: var(--border-hover);
      color: var(--text-primary);
    }

    .version-tab.active {
      background: var(--accent-dim);
      border-color: var(--accent);
      color: var(--accent);
    }

    .version-desc {
      font-size: 12px;
      color: var(--text-tertiary);
      margin-top: 4px;
    }

    /* Stats Grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }

    .stat-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
    }

    .stat-card.main {
      grid-column: span 2;
    }

    .stat-label {
      font-size: 12px;
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 8px;
    }

    .stat-value {
      font-size: 32px;
      font-weight: 700;
      font-family: 'JetBrains Mono', monospace;
    }

    .stat-value.risk-on { color: var(--accent); }
    .stat-value.neutral { color: var(--warning); }
    .stat-value.risk-off { color: var(--danger); }

    .stat-hint {
      font-size: 13px;
      color: var(--text-secondary);
      margin-top: 8px;
    }

    /* Bucket Stats */
    .bucket-value {
      font-size: 20px;
      font-weight: 600;
      font-family: 'JetBrains Mono', monospace;
    }

    .bucket-bar {
      height: 4px;
      background: var(--bg-tertiary);
      border-radius: 2px;
      margin-top: 12px;
      overflow: hidden;
    }

    .bucket-fill {
      height: 100%;
      border-radius: 2px;
      transition: width 0.3s ease;
    }

    .bucket-fill.positive { background: var(--accent); }
    .bucket-fill.negative { background: var(--danger); }

    /* Zone Legend */
    .zone-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      margin-bottom: 24px;
    }

    .zone-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      color: var(--text-secondary);
    }

    .zone-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }

    .zone-dot.risk-on { background: var(--accent); }
    .zone-dot.neutral { background: var(--warning); }
    .zone-dot.risk-off { background: var(--danger); }

    /* Chart */
    .chart-container {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 32px;
    }

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      flex-wrap: wrap;
      gap: 12px;
    }

    .chart-title {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .chart-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: var(--text-secondary);
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 4px;
      transition: all 0.2s;
    }

    .legend-item:hover { background: var(--bg-tertiary); }
    .legend-item.disabled { opacity: 0.4; }
    .legend-item.fixed { cursor: default; opacity: 0.7; }
    .legend-item.fixed:hover { background: transparent; }

    .legend-item.scale-toggle {
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      font-weight: 500;
    }
    .legend-item.scale-toggle:hover {
      border-color: var(--border-hover);
    }

    .legend-line {
      width: 16px;
      height: 3px;
      border-radius: 1px;
    }

    .legend-line.dashed {
      background: none;
      border-top: 2px dashed currentColor;
      height: 0;
    }

    .chart-wrapper {
      position: relative;
      height: 400px;
    }

    .chart-tooltip {
      position: absolute;
      top: 12px;
      left: 12px;
      background: rgba(17, 17, 19, 0.95);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 12px;
      font-size: 13px;
      pointer-events: none;
      z-index: 10;
      min-width: 140px;
      opacity: 0;
      transition: opacity 0.15s;
    }

    .chart-tooltip.visible { opacity: 1; }

    .tooltip-date {
      color: var(--text-primary);
      font-weight: 500;
      margin-bottom: 8px;
      font-family: 'JetBrains Mono', monospace;
    }

    .tooltip-item {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 4px;
    }

    .tooltip-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
    }

    .tooltip-label { color: var(--text-tertiary); }
    .tooltip-value { color: var(--text-primary); font-family: 'JetBrains Mono', monospace; }

    .chart-hint {
      text-align: center;
      font-size: 12px;
      color: var(--text-tertiary);
      margin-top: 12px;
    }

    .data-update-time {
      font-size: 12px;
      color: var(--text-tertiary);
      text-align: right;
      margin-top: 8px;
      font-family: 'JetBrains Mono', monospace;
    }

    /* Info Section */
    .info-section {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
    }

    .info-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 16px;
    }

    .info-text {
      color: var(--text-secondary);
      font-size: 14px;
      line-height: 1.8;
    }

    .info-text p {
      margin-bottom: 12px;
    }

    .info-table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
      font-size: 14px;
    }

    .info-table th,
    .info-table td {
      padding: 10px 12px;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    .info-table th {
      color: var(--text-tertiary);
      font-weight: 500;
      text-transform: uppercase;
      font-size: 12px;
    }

    /* Footer */
    footer {
      border-top: 1px solid var(--border);
      padding: 24px 0;
      text-align: center;
      margin-top: 40px;
    }

    .footer-text {
      font-size: 14px;
      color: var(--text-tertiary);
    }

    @media (max-width: 768px) {
      .page-title { font-size: 24px; }
      .stat-value { font-size: 24px; }
      .stat-card.main { grid-column: span 1; }
      .chart-wrapper { height: 300px; }
      .stats-grid { grid-template-columns: 1fr 1fr; }
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="header-content">
        <a href="../" class="logo">
          <img src="../logo.svg" alt="3D" class="logo-icon">
          <span class="logo-text">Crypto3D</span>
        </a>
        <div class="nav-links">
          <a href="../" data-zh="é¦–é¡µ" data-en="Home">é¦–é¡µ</a>
          <a href="../tev/" data-zh="TEV" data-en="TEV">TEV</a>
          <a href="../ahr999/">AHR999</a>
          <div class="lang-switch" onclick="toggleLang()">
            <span id="lang-zh" class="active">ä¸­æ–‡</span>
            <span>/</span>
            <span id="lang-en">EN</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="container">
      <div class="page-header">
        <h1 class="page-title">BMRI <span data-zh="å®è§‚é£é™©æŒ‡æ ‡" data-en="Macro Risk Index">å®è§‚é£é™©æŒ‡æ ‡</span></h1>
        <p class="page-subtitle" data-zh="Bitcoin Macro Risk Index â€” ç»¼åˆåˆ©ç‡ã€æµåŠ¨æ€§ã€é£é™©åå¥½çš„å®è§‚ç¯å¢ƒè¯„ä¼°" data-en="Bitcoin Macro Risk Index â€” Rates, Liquidity, and Risk Appetite assessment">Bitcoin Macro Risk Index â€” ç»¼åˆåˆ©ç‡ã€æµåŠ¨æ€§ã€é£é™©åå¥½çš„å®è§‚ç¯å¢ƒè¯„ä¼°</p>
      </div>

      <!-- Version Tabs -->
      <div class="version-tabs">
        <div class="version-tab active" data-version="6m" onclick="switchVersion('6m')">
          <div>6M <span data-zh="ç‰ˆ" data-en="Version">ç‰ˆ</span></div>
          <div class="version-desc" data-zh="ä¸­å‘¨æœŸè¶‹åŠ¿ï¼Œ1-6æœˆè°ƒä»“" data-en="Medium-term, 1-6 month rebalancing">ä¸­å‘¨æœŸè¶‹åŠ¿ï¼Œ1-6æœˆè°ƒä»“</div>
        </div>
        <div class="version-tab" data-version="1m" onclick="switchVersion('1m')">
          <div>1M <span data-zh="ç‰ˆ" data-en="Version">ç‰ˆ</span></div>
          <div class="version-desc" data-zh="çŸ­æœŸå†²å‡»ï¼Œ1-4å‘¨è°ƒä»“" data-en="Short-term, 1-4 week rebalancing">çŸ­æœŸå†²å‡»ï¼Œ1-4å‘¨è°ƒä»“</div>
        </div>
      </div>

      <!-- Main Stats -->
      <div class="stats-grid">
        <div class="stat-card main">
          <div class="stat-label">BMRI</div>
          <div class="stat-value" id="bmri-value">â€”</div>
          <div class="stat-hint" id="bmri-regime">â€”</div>
        </div>
        <div class="stat-card">
          <div class="stat-label" data-zh="å¸‚åœºçŠ¶æ€" data-en="Market State">å¸‚åœºçŠ¶æ€</div>
          <div class="stat-value" id="market-state" style="font-size: 24px;">â€”</div>
          <div class="stat-hint" id="regime-hint" style="margin-top: 4px;">â€”</div>
          <div class="stat-hint" id="update-date" style="color: var(--text-tertiary); font-size: 12px;">â€”</div>
        </div>
      </div>

      <!-- Bucket Stats -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-label">Rates <span data-zh="åˆ©ç‡" data-en="">(åˆ©ç‡)</span></div>
          <div class="bucket-value" id="rates-value">â€”</div>
          <div class="bucket-bar">
            <div class="bucket-fill" id="rates-bar" style="width: 50%;"></div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Liquidity <span data-zh="æµåŠ¨æ€§" data-en="">(æµåŠ¨æ€§)</span></div>
          <div class="bucket-value" id="liq-value">â€”</div>
          <div class="bucket-bar">
            <div class="bucket-fill" id="liq-bar" style="width: 50%;"></div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Risk <span data-zh="é£é™©åå¥½" data-en="">(é£é™©åå¥½)</span></div>
          <div class="bucket-value" id="risk-value">â€”</div>
          <div class="bucket-bar">
            <div class="bucket-fill" id="risk-bar" style="width: 50%;"></div>
          </div>
        </div>
      </div>

      <!-- Zone Legend -->
      <div class="zone-legend">
        <div class="zone-item">
          <div class="zone-dot risk-on"></div>
          <span id="threshold-on" data-zh="> +0.6 Risk-On" data-en="> +0.6 Risk-On">> +0.6 Risk-On</span>
        </div>
        <div class="zone-item">
          <div class="zone-dot neutral"></div>
          <span data-zh="ä¸­æ€§åŒºé—´" data-en="Neutral Zone">ä¸­æ€§åŒºé—´</span>
        </div>
        <div class="zone-item">
          <div class="zone-dot risk-off"></div>
          <span id="threshold-off" data-zh="< -0.6 Risk-Off" data-en="< -0.6 Risk-Off">< -0.6 Risk-Off</span>
        </div>
      </div>

      <!-- Chart -->
      <div class="chart-container">
        <div class="chart-header">
          <div class="chart-title" data-zh="BMRI å†å²èµ°åŠ¿" data-en="BMRI History">BMRI å†å²èµ°åŠ¿</div>
          <div class="chart-legend">
            <div class="legend-item fixed" title="é˜ˆå€¼çº¿å§‹ç»ˆæ˜¾ç¤º">
              <div class="legend-line dashed" style="color: #22c55e;"></div>
              <span id="legend-on">+0.6</span>
            </div>
            <div class="legend-item fixed" title="é˜ˆå€¼çº¿å§‹ç»ˆæ˜¾ç¤º">
              <div class="legend-line dashed" style="color: #ef4444;"></div>
              <span id="legend-off">-0.6</span>
            </div>
            <div class="legend-item" data-series="bmri" onclick="toggleSeries('bmri')">
              <div class="legend-line" style="background: #3b82f6;"></div>
              <span>BMRI</span>
            </div>
            <div class="legend-item disabled" data-series="rates" onclick="toggleSeries('rates')">
              <div class="legend-line" style="background: #06b6d4;"></div>
              <span>Rates</span>
            </div>
            <div class="legend-item disabled" data-series="liq" onclick="toggleSeries('liq')">
              <div class="legend-line" style="background: #22c55e;"></div>
              <span>Liquidity</span>
            </div>
            <div class="legend-item disabled" data-series="risk" onclick="toggleSeries('risk')">
              <div class="legend-line" style="background: #f59e0b;"></div>
              <span>Risk</span>
            </div>
            <div class="legend-item disabled" data-series="btcMcap" onclick="toggleSeries('btcMcap')">
              <div class="legend-line" style="background: #f7931a;"></div>
              <span data-zh="BTCå¸‚å€¼" data-en="BTC MCap">BTCå¸‚å€¼</span>
            </div>
            <div class="legend-item disabled" data-series="totalMcap" onclick="toggleSeries('totalMcap')">
              <div class="legend-line" style="background: #8b5cf6;"></div>
              <span data-zh="æ€»å¸‚å€¼" data-en="Total MCap">æ€»å¸‚å€¼</span>
            </div>
          </div>
        </div>
        <div class="chart-wrapper" id="chart-container"></div>
        <div class="chart-tooltip" id="chart-tooltip">
          <div class="tooltip-date" id="tooltip-date">â€”</div>
          <div class="tooltip-item" id="tooltip-bmri">
            <div class="tooltip-dot" style="background: #3b82f6;"></div>
            <span class="tooltip-label">BMRI:</span>
            <span class="tooltip-value" id="tooltip-bmri-value">â€”</span>
          </div>
          <div class="tooltip-item" id="tooltip-rates" style="display: none;">
            <div class="tooltip-dot" style="background: #06b6d4;"></div>
            <span class="tooltip-label">Rates:</span>
            <span class="tooltip-value" id="tooltip-rates-value">â€”</span>
          </div>
          <div class="tooltip-item" id="tooltip-liq" style="display: none;">
            <div class="tooltip-dot" style="background: #22c55e;"></div>
            <span class="tooltip-label">Liq:</span>
            <span class="tooltip-value" id="tooltip-liq-value">â€”</span>
          </div>
          <div class="tooltip-item" id="tooltip-risk" style="display: none;">
            <div class="tooltip-dot" style="background: #f59e0b;"></div>
            <span class="tooltip-label">Risk:</span>
            <span class="tooltip-value" id="tooltip-risk-value">â€”</span>
          </div>
          <div class="tooltip-item" id="tooltip-btcMcap" style="display: none;">
            <div class="tooltip-dot" style="background: #f7931a;"></div>
            <span class="tooltip-label">BTC:</span>
            <span class="tooltip-value" id="tooltip-btcMcap-value">â€”</span>
          </div>
          <div class="tooltip-item" id="tooltip-totalMcap" style="display: none;">
            <div class="tooltip-dot" style="background: #8b5cf6;"></div>
            <span class="tooltip-label">Total:</span>
            <span class="tooltip-value" id="tooltip-totalMcap-value">â€”</span>
          </div>
        </div>
        <div class="chart-hint" data-zh="ğŸ’¡ æ‹–åŠ¨å¹³ç§» Â· æ»šè½®ç¼©æ”¾ Â· åŒå‡»é‡ç½®" data-en="ğŸ’¡ Drag to pan Â· Scroll to zoom Â· Double-click to reset">ğŸ’¡ æ‹–åŠ¨å¹³ç§» Â· æ»šè½®ç¼©æ”¾ Â· åŒå‡»é‡ç½®</div>
        <div class="data-update-time" id="data-update-time" data-zh="æ•°æ®æ›´æ–°: â€”" data-en="Data updated: â€”">æ•°æ®æ›´æ–°: â€”</div>
      </div>

      <!-- Info Section: What is BMRI -->
      <div class="info-section" style="margin-bottom: 24px;">
        <h2 class="info-title" data-zh="ğŸ’¡ ä»€ä¹ˆæ˜¯ BMRIï¼Ÿ" data-en="ğŸ’¡ What is BMRI?">ğŸ’¡ ä»€ä¹ˆæ˜¯ BMRIï¼Ÿ</h2>
        <div class="info-text">
          <p data-zh="BMRIï¼ˆBitcoin Macro Risk Indexï¼‰æ˜¯ä¸€ä¸ªå®è§‚é£é™©è¯„ä¼°æŒ‡æ ‡ï¼Œå¸®åŠ©ä½ åˆ¤æ–­ã€Œç°åœ¨çš„å®è§‚ç¯å¢ƒå¯¹æ¯”ç‰¹å¸æ˜¯å‹å¥½è¿˜æ˜¯ä¸å‹å¥½ã€ã€‚" 
             data-en="BMRI (Bitcoin Macro Risk Index) is a macro risk indicator that helps you determine whether the current macro environment is favorable or unfavorable for Bitcoin.">
            BMRIï¼ˆBitcoin Macro Risk Indexï¼‰æ˜¯ä¸€ä¸ªå®è§‚é£é™©è¯„ä¼°æŒ‡æ ‡ï¼Œå¸®åŠ©ä½ åˆ¤æ–­ã€Œç°åœ¨çš„å®è§‚ç¯å¢ƒå¯¹æ¯”ç‰¹å¸æ˜¯å‹å¥½è¿˜æ˜¯ä¸å‹å¥½ã€ã€‚
          </p>
          <p 
            >
            <strong>æ ¸å¿ƒé€»è¾‘ï¼š</strong>æ¯”ç‰¹å¸è™½ç„¶å¸¸è¢«ç§°ä¸ºã€Œæ•°å­—é»„é‡‘ã€ï¼Œä½†å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªé£é™©èµ„äº§ã€‚å½“å…¨çƒæµåŠ¨æ€§å……è£•ã€åˆ©ç‡ä¸‹é™ã€å¸‚åœºé£é™©åå¥½ä¸Šå‡æ—¶ï¼Œæ¯”ç‰¹å¸å¾€å¾€è¡¨ç°æ›´å¥½ï¼›åä¹‹åˆ™æ‰¿å‹ã€‚
          </p>
          <p data-zh="BMRI å°†è¿™äº›å®è§‚å› ç´ é‡åŒ–æˆä¸€ä¸ªæ•°å­—ï¼Œç»™å‡ºä¸‰ç§ä¿¡å·ï¼š" 
             data-en="BMRI quantifies these macro factors into a single number, providing three signals:">
            BMRI å°†è¿™äº›å®è§‚å› ç´ é‡åŒ–æˆä¸€ä¸ªæ•°å­—ï¼Œç»™å‡ºä¸‰ç§ä¿¡å·ï¼š
          </p>
          <div style="background: var(--bg-tertiary); padding: 16px; border-radius: 8px; margin: 12px 0;">
            <p style="margin: 0 0 8px 0;">ğŸŸ¢ <strong>Risk-On</strong>ï¼šå®è§‚ç¯å¢ƒå‹å¥½ï¼Œé€‚åˆæŒæœ‰æˆ–åŠ ä»“</p>
            <p style="margin: 0 0 8px 0;">ğŸŸ¡ <strong>Neutral</strong>ï¼šå®è§‚ç¯å¢ƒä¸­æ€§ï¼Œç»´æŒç°æœ‰é…ç½®</p>
            <p style="margin: 0;">ğŸ”´ <strong>Risk-Off</strong>ï¼šå®è§‚ç¯å¢ƒæ¶åŒ–ï¼Œè€ƒè™‘å‡ä»“æˆ–å¯¹å†²</p>
          </div>
        </div>
      </div>

      <!-- Info Section: Three Components -->
      <div class="info-section" style="margin-bottom: 24px;">
        <h2 class="info-title" data-zh="ğŸ“Š ä¸‰å¤§ç»„æˆéƒ¨åˆ†" data-en="ğŸ“Š Three Components">ğŸ“Š ä¸‰å¤§ç»„æˆéƒ¨åˆ†</h2>
        <div class="info-text">
          <p data-zh="BMRI ç”±ä¸‰ä¸ªã€Œæ¡¶ã€ç»„æˆï¼Œæ¯ä¸ªæ¡¶ç›‘æµ‹å®è§‚ç¯å¢ƒçš„ä¸€ä¸ªç»´åº¦ï¼š" 
             data-en="BMRI consists of three 'buckets', each monitoring one dimension of the macro environment:">
            BMRI ç”±ä¸‰ä¸ªã€Œæ¡¶ã€ç»„æˆï¼Œæ¯ä¸ªæ¡¶ç›‘æµ‹å®è§‚ç¯å¢ƒçš„ä¸€ä¸ªç»´åº¦ï¼š
          </p>
          
          <!-- Rates Bucket -->
          <div style="background: var(--bg-tertiary); padding: 20px; border-radius: 12px; margin: 16px 0; border-left: 4px solid var(--blue);">
            <h3 style="font-size: 16px; margin-bottom: 12px; color: var(--blue);">ğŸ“‰ Rates åˆ©ç‡æ¡¶ï¼ˆæƒé‡ 35%ï¼‰</h3>
            <p style="margin-bottom: 8px;">
              <strong>ç›‘æµ‹ä»€ä¹ˆï¼š</strong>ç¾å›½å›½å€ºåˆ©ç‡çš„å˜åŒ–æ–¹å‘
            </p>
            <p style="margin-bottom: 8px;" 
              >
              <strong>ä¸ºä»€ä¹ˆé‡è¦ï¼š</strong>åˆ©ç‡ä¸Šå‡ â†’ èµ„é‡‘æˆæœ¬å¢åŠ  â†’ é£é™©èµ„äº§æ‰¿å‹ã€‚å°¤å…¶æ˜¯ã€Œå®é™…åˆ©ç‡ã€ï¼ˆæ‰£é™¤é€šèƒ€åçš„åˆ©ç‡ï¼‰ï¼Œå¯¹æ¯”ç‰¹å¸å½±å“æ›´å¤§ã€‚
            </p>
            <p style="color: var(--text-tertiary); font-size: 13px;" data-zh="æ•°æ®æ¥æºï¼š10å¹´æœŸç¾å€ºåä¹‰åˆ©ç‡ (DGS10)ã€10å¹´æœŸ TIPS å®é™…åˆ©ç‡ (DFII10)" 
               data-en="Data sources: 10Y Treasury Nominal Rate (DGS10), 10Y TIPS Real Rate (DFII10)">
              æ•°æ®æ¥æºï¼š10å¹´æœŸç¾å€ºåä¹‰åˆ©ç‡ (DGS10)ã€10å¹´æœŸ TIPS å®é™…åˆ©ç‡ (DFII10)
            </p>
          </div>

          <!-- Liquidity Bucket -->
          <div style="background: var(--bg-tertiary); padding: 20px; border-radius: 12px; margin: 16px 0; border-left: 4px solid var(--accent);">
            <h3 style="font-size: 16px; margin-bottom: 12px; color: var(--accent);">ğŸ’§ Liquidity æµåŠ¨æ€§æ¡¶ï¼ˆæƒé‡ 35%ï¼‰</h3>
            <p style="margin-bottom: 8px;">
              <strong>ç›‘æµ‹ä»€ä¹ˆï¼š</strong>å…¨çƒç¾å…ƒæµåŠ¨æ€§çš„æ¾ç´§ç¨‹åº¦
            </p>
            <p style="margin-bottom: 8px;" 
              >
              <strong>ä¸ºä»€ä¹ˆé‡è¦ï¼š</strong>æµåŠ¨æ€§æ˜¯æ‰€æœ‰èµ„äº§ä»·æ ¼çš„ã€Œæ°´ä½çº¿ã€ã€‚ç¾è”å‚¨æ‰©è¡¨ã€ç¾å…ƒèµ°å¼±ã€é€†å›è´­é‡Šæ”¾ â†’ å¸‚åœºã€Œæ°´å¤šã€â†’ æœ‰åˆ©äºæ¯”ç‰¹å¸ã€‚
            </p>
            <p style="color: var(--text-tertiary); font-size: 13px;" data-zh="æ•°æ®æ¥æºï¼šç¾å…ƒæŒ‡æ•° (DXY)ã€ç¾è”å‚¨èµ„äº§è´Ÿå€ºè¡¨ (WALCL)ã€éš”å¤œé€†å›è´­ (RRP)" 
               data-en="Data sources: Dollar Index (DXY), Fed Balance Sheet (WALCL), Overnight RRP">
              æ•°æ®æ¥æºï¼šç¾å…ƒæŒ‡æ•° (DXY)ã€ç¾è”å‚¨èµ„äº§è´Ÿå€ºè¡¨ (WALCL)ã€éš”å¤œé€†å›è´­ (RRP)
            </p>
          </div>

          <!-- Risk Bucket -->
          <div style="background: var(--bg-tertiary); padding: 20px; border-radius: 12px; margin: 16px 0; border-left: 4px solid var(--warning);">
            <h3 style="font-size: 16px; margin-bottom: 12px; color: var(--warning);">âš¡ Risk é£é™©åå¥½æ¡¶ï¼ˆæƒé‡ 30%ï¼‰</h3>
            <p style="margin-bottom: 8px;">
              <strong>ç›‘æµ‹ä»€ä¹ˆï¼š</strong>å¸‚åœºçš„ææ…Œç¨‹åº¦å’Œä¿¡ç”¨é£é™©
            </p>
            <p style="margin-bottom: 8px;" 
              >
              <strong>ä¸ºä»€ä¹ˆé‡è¦ï¼š</strong>VIX é£™å‡ã€é«˜æ”¶ç›Šå€ºåˆ©å·®èµ°é˜” â†’ å¸‚åœºé¿é™©æƒ…ç»ªå‡æ¸© â†’ èµ„é‡‘æ’¤ç¦»é£é™©èµ„äº§ï¼ˆåŒ…æ‹¬ BTCï¼‰ã€‚
            </p>
            <p style="color: var(--text-tertiary); font-size: 13px;" data-zh="æ•°æ®æ¥æºï¼šVIX ææ…ŒæŒ‡æ•° (VIXCLS)ã€é«˜æ”¶ç›Šå€ºä¿¡ç”¨åˆ©å·® (HY OAS)" 
               data-en="Data sources: VIX Fear Index (VIXCLS), High Yield Credit Spread (HY OAS)">
              æ•°æ®æ¥æºï¼šVIX ææ…ŒæŒ‡æ•° (VIXCLS)ã€é«˜æ”¶ç›Šå€ºä¿¡ç”¨åˆ©å·® (HY OAS)
            </p>
          </div>
        </div>
      </div>

      <!-- Info Section: 1M vs 6M -->
      <div class="info-section" style="margin-bottom: 24px;">
        <h2 class="info-title" data-zh="ğŸ”„ 1M ç‰ˆ vs 6M ç‰ˆ" data-en="ğŸ”„ 1M vs 6M Version">ğŸ”„ 1M ç‰ˆ vs 6M ç‰ˆ</h2>
        <div class="info-text">
          <p data-zh="æˆ‘ä»¬æä¾›ä¸¤ä¸ªç‰ˆæœ¬çš„ BMRIï¼Œé€‚åˆä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼š" 
             data-en="We offer two BMRI versions for different use cases:">
            æˆ‘ä»¬æä¾›ä¸¤ä¸ªç‰ˆæœ¬çš„ BMRIï¼Œé€‚åˆä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼š
          </p>
          
          <table class="info-table">
            <thead>
              <tr>
                <th></th>
                <th>6M ç‰ˆï¼ˆæ¨èï¼‰</th>
                <th>1M ç‰ˆ</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="font-weight: 500;">é€‚ç”¨å‘¨æœŸ</td>
                <td data-zh="1-6 ä¸ªæœˆè°ƒä»“" data-en="1-6 month rebalancing">1-6 ä¸ªæœˆè°ƒä»“</td>
                <td data-zh="1-4 å‘¨è°ƒä»“" data-en="1-4 week rebalancing">1-4 å‘¨è°ƒä»“</td>
              </tr>
              <tr>
                <td style="font-weight: 500;">ä¿¡å·ç‰¹ç‚¹</td>
                <td data-zh="æ›´ç¨³å®šï¼Œè¿‡æ»¤å™ªéŸ³" data-en="More stable, filters noise">æ›´ç¨³å®šï¼Œè¿‡æ»¤å™ªéŸ³</td>
                <td data-zh="æ›´æ•æ„Ÿï¼Œå¿«é€Ÿå“åº”" data-en="More sensitive, faster">æ›´æ•æ„Ÿï¼Œå¿«é€Ÿå“åº”</td>
              </tr>
              <tr>
                <td style="font-weight: 500;">è§‚å¯Ÿçª—å£</td>
                <td data-zh="60 å¤©å˜åŒ–" data-en="60-day changes">60 å¤©å˜åŒ–</td>
                <td data-zh="5-20 å¤©å˜åŒ–" data-en="5-20 day changes">5-20 å¤©å˜åŒ–</td>
              </tr>
              <tr>
                <td style="font-weight: 500;">é˜ˆå€¼</td>
                <td>Â±0.6</td>
                <td>Â±0.5</td>
              </tr>
              <tr>
                <td style="font-weight: 500;">é€‚åˆäººç¾¤</td>
                <td data-zh="é•¿çº¿æŠ•èµ„è€…" data-en="Long-term investors">é•¿çº¿æŠ•èµ„è€…</td>
                <td data-zh="çŸ­çº¿äº¤æ˜“è€…" data-en="Short-term traders">çŸ­çº¿äº¤æ˜“è€…</td>
              </tr>
            </tbody>
          </table>

          <div style="background: var(--accent-dim); padding: 16px; border-radius: 8px; margin-top: 16px; border: 1px solid rgba(34, 197, 94, 0.3);">
            <p style="margin: 0; color: var(--accent);">ğŸ’¡ <strong data-zh="å»ºè®®ï¼š" data-en="Tip: ">å»ºè®®ï¼š</strong><span data-zh="å¤§å¤šæ•°æŠ•èµ„è€…ä½¿ç”¨ 6M ç‰ˆä½œä¸ºä¸»è¦å‚è€ƒã€‚å¦‚æœä½ éœ€è¦æ›´åŠæ—¶çš„çŸ­æœŸé¢„è­¦ï¼Œå¯ä»¥å åŠ å‚è€ƒ 1M ç‰ˆã€‚" data-en="Most investors should use 6M version. Add 1M version for short-term alerts if needed.">å¤§å¤šæ•°æŠ•èµ„è€…ä½¿ç”¨ 6M ç‰ˆä½œä¸ºä¸»è¦å‚è€ƒã€‚å¦‚æœä½ éœ€è¦æ›´åŠæ—¶çš„çŸ­æœŸé¢„è­¦ï¼Œå¯ä»¥å åŠ å‚è€ƒ 1M ç‰ˆã€‚</span></p>
          </div>
        </div>
      </div>

      <!-- Info Section: How to Use -->
      <div class="info-section" style="margin-bottom: 24px;">
        <h2 class="info-title" data-zh="ğŸ¯ å¦‚ä½•ä½¿ç”¨ BMRI" data-en="ğŸ¯ How to Use BMRI">ğŸ¯ å¦‚ä½•ä½¿ç”¨ BMRI</h2>
        <div class="info-text">
          <p data-zh="BMRI æ˜¯ä¸€ä¸ªã€Œå®è§‚æ»¤ç½‘ã€ï¼Œä¸æ˜¯ç²¾ç¡®çš„ä¹°å–ä¿¡å·ã€‚å»ºè®®è¿™æ ·ä½¿ç”¨ï¼š" 
             data-en="BMRI is a 'macro filter', not a precise buy/sell signal. Here's how to use it:">
            BMRI æ˜¯ä¸€ä¸ªã€Œå®è§‚æ»¤ç½‘ã€ï¼Œä¸æ˜¯ç²¾ç¡®çš„ä¹°å–ä¿¡å·ã€‚å»ºè®®è¿™æ ·ä½¿ç”¨ï¼š
          </p>
          
          <div style="display: grid; gap: 16px; margin: 16px 0;">
            <div style="background: var(--bg-tertiary); padding: 16px; border-radius: 8px;">
              <p style="margin: 0 0 8px 0; font-weight: 500;">ğŸŸ¢ å½“ BMRI å¤„äº Risk-On åŒºåŸŸ</p>
              <ul style="margin: 0; padding-left: 20px; color: var(--text-secondary);">
                <li data-zh="å®è§‚ç¯å¢ƒæ”¯æŒé£é™©èµ„äº§ï¼Œå¯ä»¥ä¿æŒæˆ–å¢åŠ  BTC ä»“ä½" data-en="Macro supports risk assets, maintain or increase BTC position">å®è§‚ç¯å¢ƒæ”¯æŒé£é™©èµ„äº§ï¼Œå¯ä»¥ä¿æŒæˆ–å¢åŠ  BTC ä»“ä½</li>
                <li data-zh="å®šæŠ•è®¡åˆ’å¯ä»¥æ­£å¸¸æ‰§è¡Œæˆ–åŠ å¤§åŠ›åº¦" data-en="DCA plan can continue or increase">å®šæŠ•è®¡åˆ’å¯ä»¥æ­£å¸¸æ‰§è¡Œæˆ–åŠ å¤§åŠ›åº¦</li>
              </ul>
            </div>
            <div style="background: var(--bg-tertiary); padding: 16px; border-radius: 8px;">
              <p style="margin: 0 0 8px 0; font-weight: 500;">ğŸŸ¡ å½“ BMRI å¤„äº Neutral åŒºåŸŸ</p>
              <ul style="margin: 0; padding-left: 20px; color: var(--text-secondary);">
                <li data-zh="ç»´æŒç°æœ‰é…ç½®ï¼Œä¸åšå¤§å¹…è°ƒæ•´" data-en="Maintain current allocation, no major changes">ç»´æŒç°æœ‰é…ç½®ï¼Œä¸åšå¤§å¹…è°ƒæ•´</li>
                <li data-zh="å…³æ³¨ BMRI çš„å˜åŒ–æ–¹å‘ï¼ˆä¸Šå‡è¿˜æ˜¯ä¸‹é™ï¼‰" data-en="Watch BMRI direction (rising or falling)">å…³æ³¨ BMRI çš„å˜åŒ–æ–¹å‘ï¼ˆä¸Šå‡è¿˜æ˜¯ä¸‹é™ï¼‰</li>
              </ul>
            </div>
            <div style="background: var(--bg-tertiary); padding: 16px; border-radius: 8px;">
              <p style="margin: 0 0 8px 0; font-weight: 500;">ğŸ”´ å½“ BMRI å¤„äº Risk-Off åŒºåŸŸ</p>
              <ul style="margin: 0; padding-left: 20px; color: var(--text-secondary);">
                <li data-zh="å®è§‚é€†é£ï¼Œè€ƒè™‘é™ä½é£é™©æ•å£" data-en="Macro headwinds, consider reducing risk exposure">å®è§‚é€†é£ï¼Œè€ƒè™‘é™ä½é£é™©æ•å£</li>
                <li data-zh="å¯ä»¥æš‚åœå®šæŠ•ï¼Œç­‰å¾…æ›´å¥½çš„å®è§‚çª—å£" data-en="May pause DCA, wait for better macro conditions">å¯ä»¥æš‚åœå®šæŠ•ï¼Œç­‰å¾…æ›´å¥½çš„å®è§‚çª—å£</li>
                <li data-zh="æ³¨æ„ï¼šä¸æ˜¯è®©ä½ æ¸…ä»“ï¼Œè€Œæ˜¯è°¨æ…è¡Œäº‹" data-en="Note: Not suggesting to sell all, but to be cautious">æ³¨æ„ï¼šä¸æ˜¯è®©ä½ æ¸…ä»“ï¼Œè€Œæ˜¯è°¨æ…è¡Œäº‹</li>
              </ul>
            </div>
          </div>

          <div style="background: var(--warning-dim); padding: 16px; border-radius: 8px; margin-top: 16px; border: 1px solid rgba(245, 158, 11, 0.3);">
            <p style="margin: 0; color: var(--warning);">âš ï¸ <strong data-zh="é‡è¦æç¤ºï¼š" data-en="Important: ">é‡è¦æç¤ºï¼š</strong><span data-zh="BMRI å…³æ³¨çš„æ˜¯å®è§‚èƒŒæ™¯ï¼Œä¸èƒ½é¢„æµ‹çŸ­æœŸä»·æ ¼æ³¢åŠ¨ã€‚å³ä½¿ Risk-Onï¼ŒBTC ä¹Ÿå¯èƒ½å› å…¶ä»–å› ç´ ä¸‹è·Œï¼›å³ä½¿ Risk-Offï¼ŒBTC ä¹Ÿå¯èƒ½åå¼¹ã€‚å®ƒå¸®ä½ åˆ¤æ–­ã€Œå¤§ç¯å¢ƒã€ï¼Œä¸æ˜¯æ‹©æ—¶å·¥å…·ã€‚" data-en="BMRI focuses on macro backdrop, not short-term price prediction. BTC can drop even in Risk-On and rally in Risk-Off. It helps assess the 'big picture', not timing.">BMRI å…³æ³¨çš„æ˜¯å®è§‚èƒŒæ™¯ï¼Œä¸èƒ½é¢„æµ‹çŸ­æœŸä»·æ ¼æ³¢åŠ¨ã€‚å³ä½¿ Risk-Onï¼ŒBTC ä¹Ÿå¯èƒ½å› å…¶ä»–å› ç´ ä¸‹è·Œï¼›å³ä½¿ Risk-Offï¼ŒBTC ä¹Ÿå¯èƒ½åå¼¹ã€‚å®ƒå¸®ä½ åˆ¤æ–­ã€Œå¤§ç¯å¢ƒã€ï¼Œä¸æ˜¯æ‹©æ—¶å·¥å…·ã€‚</span></p>
          </div>
        </div>
      </div>

      <!-- Info Section: Backtest -->
      <div class="info-section" style="margin-bottom: 24px;">
        <h2 class="info-title" data-zh="ğŸ“ˆ å†å²å›æµ‹" data-en="ğŸ“ˆ Historical Backtest">ğŸ“ˆ å†å²å›æµ‹</h2>
        <div class="info-text">
          <p data-zh="æˆ‘ä»¬å¯¹ BMRI è¿›è¡Œäº†å†å²å›æµ‹ï¼ˆ2017-08 è‡³ 2026-02ï¼‰ï¼ŒæŒ‰ BMRI åˆ†ä½æ•°åˆ†ç»„ï¼Œç»Ÿè®¡æœªæ¥æ”¶ç›Šï¼š" 
             data-en="We backtested BMRI (2017-08 to 2026-02), grouping by BMRI percentiles and measuring future returns:">
            æˆ‘ä»¬å¯¹ BMRI è¿›è¡Œäº†å†å²å›æµ‹ï¼ˆ2017-08 è‡³ 2026-02ï¼‰ï¼ŒæŒ‰ BMRI åˆ†ä½æ•°åˆ†ç»„ï¼Œç»Ÿè®¡æœªæ¥æ”¶ç›Šï¼š
          </p>
          
          <p style="margin: 16px 0 8px 0; font-weight: 500;" data-zh="6M ç‰ˆå›æµ‹ç»“æœï¼ˆåˆ†ä½æ¡¶å¹³å‡æœªæ¥ 6 ä¸ªæœˆæ”¶ç›Šï¼‰ï¼š" 
             data-en="6M Version Backtest (Avg 6-Month Forward Return by Quintile):">
            6M ç‰ˆå›æµ‹ç»“æœï¼ˆåˆ†ä½æ¡¶å¹³å‡æœªæ¥ 6 ä¸ªæœˆæ”¶ç›Šï¼‰ï¼š
          </p>
          
          <div style="display: flex; gap: 8px; margin: 12px 0; flex-wrap: wrap;">
            <div style="flex: 1; min-width: 80px; background: var(--danger-dim); padding: 12px; border-radius: 8px; text-align: center;">
              <div style="font-size: 12px; color: var(--text-tertiary);">æ¡¶ 0 (æœ€ä½)</div>
              <div style="font-size: 18px; font-weight: 600; font-family: 'JetBrains Mono'; color: var(--danger);">+5.5%</div>
            </div>
            <div style="flex: 1; min-width: 80px; background: var(--bg-tertiary); padding: 12px; border-radius: 8px; text-align: center;">
              <div style="font-size: 12px; color: var(--text-tertiary);">æ¡¶ 1</div>
              <div style="font-size: 18px; font-weight: 600; font-family: 'JetBrains Mono';">+19.9%</div>
            </div>
            <div style="flex: 1; min-width: 80px; background: var(--bg-tertiary); padding: 12px; border-radius: 8px; text-align: center;">
              <div style="font-size: 12px; color: var(--text-tertiary);">æ¡¶ 2</div>
              <div style="font-size: 18px; font-weight: 600; font-family: 'JetBrains Mono';">+39.8%</div>
            </div>
            <div style="flex: 1; min-width: 80px; background: var(--bg-tertiary); padding: 12px; border-radius: 8px; text-align: center;">
              <div style="font-size: 12px; color: var(--text-tertiary);">æ¡¶ 3</div>
              <div style="font-size: 18px; font-weight: 600; font-family: 'JetBrains Mono';">+50.2%</div>
            </div>
            <div style="flex: 1; min-width: 80px; background: var(--accent-dim); padding: 12px; border-radius: 8px; text-align: center;">
              <div style="font-size: 12px; color: var(--text-tertiary);">æ¡¶ 4 (æœ€é«˜)</div>
              <div style="font-size: 18px; font-weight: 600; font-family: 'JetBrains Mono'; color: var(--accent);">+80.0%</div>
            </div>
          </div>
          
          <p style="color: var(--text-secondary);" data-zh="è§„å¾‹å¾ˆæ¸…æ™°ï¼šBMRI è¶Šé«˜ï¼ˆå®è§‚ç¯å¢ƒè¶Šå¥½ï¼‰ï¼Œæœªæ¥ 6 ä¸ªæœˆ BTC çš„å¹³å‡æ”¶ç›Šè¶Šé«˜ã€‚æœ€é«˜åˆ†ä½çš„å¹³å‡æ”¶ç›Šæ˜¯æœ€ä½åˆ†ä½çš„ 14 å€ä»¥ä¸Šã€‚" 
             data-en="Clear pattern: Higher BMRI (better macro) correlates with higher 6-month BTC returns. Top quintile averages 14x the return of the bottom.">
            è§„å¾‹å¾ˆæ¸…æ™°ï¼šBMRI è¶Šé«˜ï¼ˆå®è§‚ç¯å¢ƒè¶Šå¥½ï¼‰ï¼Œæœªæ¥ 6 ä¸ªæœˆ BTC çš„å¹³å‡æ”¶ç›Šè¶Šé«˜ã€‚æœ€é«˜åˆ†ä½çš„å¹³å‡æ”¶ç›Šæ˜¯æœ€ä½åˆ†ä½çš„ 14 å€ä»¥ä¸Šã€‚
          </p>
        </div>
      </div>

      <!-- Info Section: Data Sources -->
      <div class="info-section">
        <h2 class="info-title" data-zh="ğŸ“š æ•°æ®æ¥æº" data-en="ğŸ“š Data Sources">ğŸ“š æ•°æ®æ¥æº</h2>
        <div class="info-text">
          <p data-zh="BMRI çš„æ‰€æœ‰æ•°æ®æ¥è‡ªç¾è”å‚¨ç»æµæ•°æ®åº“ï¼ˆFREDï¼‰ï¼Œç¡®ä¿é€æ˜å’Œå¯éªŒè¯ï¼š" 
             data-en="All BMRI data comes from FRED (Federal Reserve Economic Data), ensuring transparency and verifiability:">
            BMRI çš„æ‰€æœ‰æ•°æ®æ¥è‡ªç¾è”å‚¨ç»æµæ•°æ®åº“ï¼ˆFREDï¼‰ï¼Œç¡®ä¿é€æ˜å’Œå¯éªŒè¯ï¼š
          </p>
          
          <table class="info-table">
            <thead>
              <tr>
                <th data-zh="æŒ‡æ ‡" data-en="Indicator">æŒ‡æ ‡</th>
                <th data-zh="FRED ä»£ç " data-en="FRED Code">FRED ä»£ç </th>
                <th data-zh="é¢‘ç‡" data-en="Frequency">é¢‘ç‡</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td data-zh="10å¹´æœŸç¾å€ºåˆ©ç‡" data-en="10Y Treasury Rate">10å¹´æœŸç¾å€ºåˆ©ç‡</td>
                <td><a href="https://fred.stlouisfed.org/series/DGS10" target="_blank" style="color: var(--blue);">DGS10</a></td>
                <td data-zh="æ—¥é¢‘" data-en="Daily">æ—¥é¢‘</td>
              </tr>
              <tr>
                <td data-zh="10å¹´æœŸå®é™…åˆ©ç‡" data-en="10Y Real Rate (TIPS)">10å¹´æœŸå®é™…åˆ©ç‡</td>
                <td><a href="https://fred.stlouisfed.org/series/DFII10" target="_blank" style="color: var(--blue);">DFII10</a></td>
                <td data-zh="æ—¥é¢‘" data-en="Daily">æ—¥é¢‘</td>
              </tr>
              <tr>
                <td data-zh="ç¾å…ƒæŒ‡æ•°" data-en="Dollar Index">ç¾å…ƒæŒ‡æ•°</td>
                <td><a href="https://fred.stlouisfed.org/series/DTWEXBGS" target="_blank" style="color: var(--blue);">DTWEXBGS</a></td>
                <td data-zh="æ—¥é¢‘" data-en="Daily">æ—¥é¢‘</td>
              </tr>
              <tr>
                <td data-zh="ç¾è”å‚¨èµ„äº§è´Ÿå€ºè¡¨" data-en="Fed Balance Sheet">ç¾è”å‚¨èµ„äº§è´Ÿå€ºè¡¨</td>
                <td><a href="https://fred.stlouisfed.org/series/WALCL" target="_blank" style="color: var(--blue);">WALCL</a></td>
                <td data-zh="å‘¨é¢‘" data-en="Weekly">å‘¨é¢‘</td>
              </tr>
              <tr>
                <td data-zh="éš”å¤œé€†å›è´­" data-en="Overnight RRP">éš”å¤œé€†å›è´­</td>
                <td><a href="https://fred.stlouisfed.org/series/RRPONTTLD" target="_blank" style="color: var(--blue);">RRPONTTLD</a></td>
                <td data-zh="æ—¥é¢‘" data-en="Daily">æ—¥é¢‘</td>
              </tr>
              <tr>
                <td data-zh="VIX ææ…ŒæŒ‡æ•°" data-en="VIX Index">VIX ææ…ŒæŒ‡æ•°</td>
                <td><a href="https://fred.stlouisfed.org/series/VIXCLS" target="_blank" style="color: var(--blue);">VIXCLS</a></td>
                <td data-zh="æ—¥é¢‘" data-en="Daily">æ—¥é¢‘</td>
              </tr>
              <tr>
                <td data-zh="é«˜æ”¶ç›Šå€ºåˆ©å·®" data-en="HY Credit Spread">é«˜æ”¶ç›Šå€ºåˆ©å·®</td>
                <td><a href="https://fred.stlouisfed.org/series/BAMLH0A0HYM2" target="_blank" style="color: var(--blue);">BAMLH0A0HYM2</a></td>
                <td data-zh="æ—¥é¢‘" data-en="Daily">æ—¥é¢‘</td>
              </tr>
            </tbody>
          </table>
          
          <p style="color: var(--text-tertiary); font-size: 13px; margin-top: 16px;" data-zh="âš ï¸ æ•°æ®è®¸å¯ï¼šICE BofA OAS å’Œ VIX ç³»åˆ—åœ¨ FRED ä¸Šæ ‡æ³¨ä¸ºç‰ˆæƒå—é™æ•°æ®ï¼Œæœ¬ç«™ä»…ç”¨äºæ•™è‚²å’Œç ”ç©¶ç›®çš„ã€‚" 
             data-en="âš ï¸ Data License: ICE BofA OAS and VIX series on FRED are copyright-restricted. This site is for educational and research purposes only.">
            âš ï¸ æ•°æ®è®¸å¯ï¼šICE BofA OAS å’Œ VIX ç³»åˆ—åœ¨ FRED ä¸Šæ ‡æ³¨ä¸ºç‰ˆæƒå—é™æ•°æ®ï¼Œæœ¬ç«™ä»…ç”¨äºæ•™è‚²å’Œç ”ç©¶ç›®çš„ã€‚
          </p>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <div class="container">
      <p class="footer-text">Â© 2026 Crypto3D</p>
    </div>
  </footer>

  <script>
    let currentLang = 'zh';
    let currentVersion = '6m';
    let bmriData = null;
    let chart = null;
    let series = {};
    let zones = {};
    let seriesVisible = { bmri: true, rates: false, liq: false, risk: false, btcMcap: false, totalMcap: false };
    let mcapData = null;
    let defaultRange = { from: 0, to: 0 };
    let historyData = {};
    let currentThresholds = { on: 0.6, off: -0.6 };

    // Format market cap value
    function formatMcap(value) {
      if (value >= 1e12) return '$' + (value / 1e12).toFixed(2) + 'T';
      if (value >= 1e9) return '$' + (value / 1e9).toFixed(0) + 'B';
      return '$' + value.toLocaleString();
    }

    // Format time to YYYY/MM/DD
    function formatTime(time) {
      if (!time) return 'â€”';
      if (typeof time === 'string') {
        const parts = time.split('-');
        if (parts.length === 3) return `${parts[0]}/${parts[1]}/${parts[2]}`;
        return time;
      }
      if (typeof time === 'number') {
        const date = new Date(time * 1000);
        return `${date.getFullYear()}/${String(date.getMonth() + 1).padStart(2, '0')}/${String(date.getDate()).padStart(2, '0')}`;
      }
      if (time.year !== undefined) {
        return `${time.year}/${String(time.month).padStart(2, '0')}/${String(time.day).padStart(2, '0')}`;
      }
      return 'â€”';
    }

    function toggleLang() {
      currentLang = currentLang === 'zh' ? 'en' : 'zh';
      updateLang();
      if (bmriData) updateDisplay();
    }

    function updateLang() {
      document.getElementById('lang-zh').className = currentLang === 'zh' ? 'active' : '';
      document.getElementById('lang-en').className = currentLang === 'en' ? 'active' : '';
      document.documentElement.lang = currentLang === 'zh' ? 'zh-CN' : 'en';
      document.querySelectorAll('[data-zh]').forEach(el => {
        el.textContent = el.getAttribute(`data-${currentLang}`);
      });
      localStorage.setItem('lang', currentLang);
    }

    function switchVersion(version) {
      currentVersion = version;
      document.querySelectorAll('.version-tab').forEach(tab => {
        tab.classList.toggle('active', tab.dataset.version === version);
      });
      if (bmriData) updateDisplay();
    }

    function getRegimeInfo(regime) {
      if (regime === 'RISK_ON') {
        return { 
          class: 'risk-on', 
          label: currentLang === 'zh' ? 'é£é™©å¼€å¯' : 'Risk-On', 
          state: 'ğŸŸ¢ Risk-On',
          hint: currentLang === 'zh' ? 'å®è§‚ç¯å¢ƒå‹å¥½ï¼Œé€‚åˆæŒæœ‰æˆ–åŠ ä»“' : 'Favorable macro, hold or add'
        };
      } else if (regime === 'RISK_OFF') {
        return { 
          class: 'risk-off', 
          label: currentLang === 'zh' ? 'é£é™©å…³é—­' : 'Risk-Off', 
          state: 'ğŸ”´ Risk-Off',
          hint: currentLang === 'zh' ? 'å®è§‚ç¯å¢ƒæ¶åŒ–ï¼Œè€ƒè™‘å‡ä»“æˆ–å¯¹å†²' : 'Unfavorable macro, reduce or hedge'
        };
      } else {
        return { 
          class: 'neutral', 
          label: currentLang === 'zh' ? 'ä¸­æ€§' : 'Neutral', 
          state: 'ğŸŸ¡ Neutral',
          hint: currentLang === 'zh' ? 'å®è§‚ç¯å¢ƒä¸­æ€§ï¼Œç»´æŒç°æœ‰é…ç½®' : 'Neutral macro, maintain position'
        };
      }
    }

    function updateBucketBar(id, value) {
      const bar = document.getElementById(id);
      if (!bar || value === null) return;
      const percent = Math.min(100, Math.max(0, value));
      bar.style.width = percent + '%';
      bar.className = 'bucket-fill ' + (value >= 0 ? 'positive' : 'negative');
    }

    function toggleSeries(name) {
      if (!series[name]) return;
      seriesVisible[name] = !seriesVisible[name];
      series[name].applyOptions({ visible: seriesVisible[name] });
      
      // Toggle zone backgrounds with BMRI
      if (name === 'bmri') {
        if (zones.green) zones.green.applyOptions({ visible: seriesVisible[name] });
        if (zones.red) zones.red.applyOptions({ visible: seriesVisible[name] });
      }
      
      // Update tooltip visibility
      const tooltipItem = document.getElementById(`tooltip-${name}`);
      if (tooltipItem) tooltipItem.style.display = seriesVisible[name] ? 'flex' : 'none';
      
      const legendItem = document.querySelector(`.legend-item[data-series="${name}"]`);
      if (legendItem) legendItem.classList.toggle('disabled', !seriesVisible[name]);
    }

    function resetChart() {
      if (!chart || !defaultRange.from) return;
      chart.timeScale().setVisibleRange(defaultRange);
    }

    function updateDisplay() {
      const versionData = bmriData[currentVersion];
      const current = versionData.current;
      const thresholds = versionData.thresholds;
      currentThresholds = thresholds;
      const regimeInfo = getRegimeInfo(current.regime);

      // Update main value
      document.getElementById('bmri-value').textContent = current.value.toFixed(1);
      document.getElementById('bmri-value').className = `stat-value ${regimeInfo.class}`;
      document.getElementById('bmri-regime').textContent = regimeInfo.label;
      document.getElementById('market-state').textContent = regimeInfo.state;
      document.getElementById('regime-hint').textContent = regimeInfo.hint;
      document.getElementById('update-date').textContent = current.date;

      // Update bucket values
      document.getElementById('rates-value').textContent = current.rates !== null ? current.rates.toFixed(2) : 'â€”';
      document.getElementById('liq-value').textContent = current.liq !== null ? current.liq.toFixed(2) : 'â€”';
      document.getElementById('risk-value').textContent = current.risk !== null ? current.risk.toFixed(2) : 'â€”';

      // Update bucket bars
      updateBucketBar('rates-bar', current.rates);
      updateBucketBar('liq-bar', current.liq);
      updateBucketBar('risk-bar', current.risk);

      // Update thresholds display
      document.getElementById('threshold-on').textContent = `< ${thresholds.on} Risk-On`;
      document.getElementById('threshold-off').textContent = `> ${thresholds.off} Risk-Off`;
      document.getElementById('legend-on').textContent = `${thresholds.on}`;
      document.getElementById('legend-off').textContent = `${thresholds.off}`;

      // Draw chart
      drawChart(versionData.history, thresholds);
    }

    function drawChart(history, thresholds) {
      const container = document.getElementById('chart-container');
      
      // Destroy existing chart
      if (chart) {
        chart.remove();
        chart = null;
        series = {};
        zones = {};
      }
      
      chart = LightweightCharts.createChart(container, {
        layout: {
          background: { type: 'solid', color: 'transparent' },
          textColor: '#a1a1aa',
          fontFamily: "'Inter', sans-serif",
        },
        grid: {
          vertLines: { color: 'rgba(39, 39, 42, 0.5)' },
          horzLines: { color: 'rgba(39, 39, 42, 0.5)' },
        },
        crosshair: {
          mode: LightweightCharts.CrosshairMode.Normal,
          vertLine: { color: 'rgba(59, 130, 246, 0.5)', labelBackgroundColor: '#3b82f6' },
          horzLine: { color: 'rgba(59, 130, 246, 0.5)', labelBackgroundColor: '#3b82f6' },
        },
        rightPriceScale: {
          borderColor: '#27272a',
          scaleMargins: { top: 0.1, bottom: 0.1 },
        },
        leftPriceScale: {
          visible: true,
          borderColor: '#27272a',
          scaleMargins: { top: 0.1, bottom: 0.1 },
          mode: LightweightCharts.PriceScaleMode.Logarithmic,
        },
        timeScale: {
          borderColor: '#27272a',
          timeVisible: false,
          secondsVisible: false,
          minBarSpacing: 0.1,
          tickMarkFormatter: (time) => {
            if (typeof time === 'string') return time.substring(0, 4);
            if (typeof time === 'number') return new Date(time * 1000).getFullYear().toString();
            if (time.year !== undefined) return time.year.toString();
            return '';
          },
        },
        handleScroll: { mouseWheel: true, pressedMouseMove: true },
        handleScale: { axisPressedMouseMove: true, mouseWheel: true, pinch: true },
      });

      // Resize handler
      const resizeObserver = new ResizeObserver(entries => {
        if (entries.length === 0) return;
        const { width, height } = entries[0].contentRect;
        chart.applyOptions({ width, height });
      });
      resizeObserver.observe(container);

      // Prepare data
      const bmriDataArr = history.map(d => ({ time: d.date, value: d.bmri }));
      const ratesDataArr = history.map(d => ({ time: d.date, value: d.rates })).filter(d => d.value !== null);
      const liqDataArr = history.map(d => ({ time: d.date, value: d.liq })).filter(d => d.value !== null);
      const riskDataArr = history.map(d => ({ time: d.date, value: d.risk })).filter(d => d.value !== null);

      // Build lookup table for tooltip
      historyData = {};
      history.forEach(d => { historyData[d.date] = d; });

      const lastDate = history[history.length - 1].date;

      // Zone backgrounds (BMRI 0-100: lower=safer, higher=riskier)
      zones.green = chart.addBaselineSeries({
        baseValue: { type: 'price', price: thresholds.on },
        topLineColor: 'transparent',
        topFillColor1: 'transparent',
        topFillColor2: 'transparent',
        bottomLineColor: 'transparent',
        bottomFillColor1: 'rgba(34, 197, 94, 0.08)',
        bottomFillColor2: 'rgba(34, 197, 94, 0.25)',
        priceScaleId: 'right',
        lastValueVisible: false,
        priceLineVisible: false,
      });
      zones.green.setData(bmriDataArr);

      zones.red = chart.addBaselineSeries({
        baseValue: { type: 'price', price: thresholds.off },
        topLineColor: 'transparent',
        topFillColor1: 'rgba(239, 68, 68, 0.08)',
        topFillColor2: 'rgba(239, 68, 68, 0.25)',
        bottomLineColor: 'transparent',
        bottomFillColor1: 'transparent',
        bottomFillColor2: 'transparent',
        priceScaleId: 'right',
        lastValueVisible: false,
        priceLineVisible: false,
      });
      zones.red.setData(bmriDataArr);

      // Add future whitespace (90 days)
      const lastDateObj = new Date(lastDate);
      for (let i = 1; i <= 90; i++) {
        const d = new Date(lastDateObj);
        d.setDate(d.getDate() + i);
        bmriDataArr.push({ time: d.toISOString().split('T')[0] });
      }

      // BMRI Series
      series.bmri = chart.addLineSeries({
        color: '#3b82f6',
        lineWidth: 2,
        priceScaleId: 'right',
        priceFormat: { type: 'price', precision: 1, minMove: 0.1 },
        lastValueVisible: false,
        priceLineVisible: false,
      });
      series.bmri.setData(bmriDataArr);

      // Threshold lines
      series.bmri.createPriceLine({
        price: thresholds.on,
        color: '#22c55e',
        lineWidth: 1,
        lineStyle: LightweightCharts.LineStyle.Dashed,
        axisLabelVisible: true,
      });
      series.bmri.createPriceLine({
        price: thresholds.off,
        color: '#ef4444',
        lineWidth: 1,
        lineStyle: LightweightCharts.LineStyle.Dashed,
        axisLabelVisible: true,
      });
      series.bmri.createPriceLine({
        price: 0,
        color: 'rgba(161, 161, 170, 0.3)',
        lineWidth: 1,
        lineStyle: LightweightCharts.LineStyle.Dashed,
        axisLabelVisible: false,
      });

      // Rates Series (hidden by default)
      series.rates = chart.addLineSeries({
        color: '#06b6d4',
        lineWidth: 1.5,
        priceScaleId: 'right',
        priceFormat: { type: 'price', precision: 2, minMove: 0.01 },
        lastValueVisible: false,
        priceLineVisible: false,
        visible: false,
      });
      series.rates.setData(ratesDataArr);

      // Liquidity Series (hidden by default)
      series.liq = chart.addLineSeries({
        color: '#22c55e',
        lineWidth: 1.5,
        priceScaleId: 'right',
        priceFormat: { type: 'price', precision: 2, minMove: 0.01 },
        lastValueVisible: false,
        priceLineVisible: false,
        visible: false,
      });
      series.liq.setData(liqDataArr);

      // Risk Series (hidden by default)
      series.risk = chart.addLineSeries({
        color: '#f59e0b',
        lineWidth: 1.5,
        priceScaleId: 'right',
        priceFormat: { type: 'price', precision: 2, minMove: 0.01 },
        lastValueVisible: false,
        priceLineVisible: false,
        visible: false,
      });
      series.risk.setData(riskDataArr);

      // BTC Market Cap Series (left axis, hidden by default)
      series.btcMcap = chart.addLineSeries({
        color: '#f7931a',
        lineWidth: 1.5,
        priceScaleId: 'left',
        priceFormat: { 
          type: 'custom',
          formatter: (price) => {
            if (price >= 1e12) return (price / 1e12).toFixed(2) + 'T';
            if (price >= 1e9) return (price / 1e9).toFixed(0) + 'B';
            return price.toLocaleString();
          }
        },
        lastValueVisible: false,
        priceLineVisible: false,
        visible: false,
      });

      // Total Market Cap Series (left axis, hidden by default)
      series.totalMcap = chart.addLineSeries({
        color: '#8b5cf6',
        lineWidth: 1.5,
        priceScaleId: 'left',
        priceFormat: { 
          type: 'custom',
          formatter: (price) => {
            if (price >= 1e12) return (price / 1e12).toFixed(2) + 'T';
            if (price >= 1e9) return (price / 1e9).toFixed(0) + 'B';
            return price.toLocaleString();
          }
        },
        lastValueVisible: false,
        priceLineVisible: false,
        visible: false,
      });

      // Load market cap data if available
      if (mcapData) {
        const btcMcapArr = mcapData.filter(d => d.btc_mcap).map(d => ({ time: d.date, value: d.btc_mcap }));
        const totalMcapArr = mcapData.filter(d => d.total_mcap).map(d => ({ time: d.date, value: d.total_mcap }));
        if (btcMcapArr.length > 0) series.btcMcap.setData(btcMcapArr);
        if (totalMcapArr.length > 0) series.totalMcap.setData(totalMcapArr);
        // Merge mcap data into historyData for tooltip
        mcapData.forEach(d => {
          if (historyData[d.date]) {
            historyData[d.date].btc_mcap = d.btc_mcap;
            historyData[d.date].total_mcap = d.total_mcap;
          }
        });
      }

      // Double-click to reset
      container.addEventListener('dblclick', resetChart);

      // Crosshair tooltip
      const tooltip = document.getElementById('chart-tooltip');
      chart.subscribeCrosshairMove(param => {
        if (!param.time || !param.point || param.point.x < 0) {
          tooltip.classList.remove('visible');
          return;
        }
        
        const dateStr = typeof param.time === 'string' ? param.time : 
          `${param.time.year}-${String(param.time.month).padStart(2, '0')}-${String(param.time.day).padStart(2, '0')}`;
        const data = historyData[dateStr];
        
        if (data) {
          document.getElementById('tooltip-date').textContent = formatTime(param.time);
          document.getElementById('tooltip-bmri-value').textContent = data.bmri?.toFixed(1) ?? 'â€”';
          document.getElementById('tooltip-rates-value').textContent = data.rates?.toFixed(2) ?? 'â€”';
          document.getElementById('tooltip-liq-value').textContent = data.liq?.toFixed(2) ?? 'â€”';
          document.getElementById('tooltip-risk-value').textContent = data.risk?.toFixed(2) ?? 'â€”';
          document.getElementById('tooltip-btcMcap-value').textContent = data.btc_mcap ? formatMcap(data.btc_mcap) : 'â€”';
          document.getElementById('tooltip-totalMcap-value').textContent = data.total_mcap ? formatMcap(data.total_mcap) : 'â€”';
          tooltip.classList.add('visible');
        } else {
          tooltip.classList.remove('visible');
        }
      });

      // Store default range for reset
      chart.timeScale().fitContent();
      setTimeout(() => {
        defaultRange = chart.timeScale().getVisibleRange();
      }, 100);
    }

    async function loadData() {
      try {
        // Load BMRI data
        const bmriRes = await fetch('../indicators/data/bmri.json');
        const rawBmriData = await bmriRes.json();
        
        // Extract updated_at and set it
        if (rawBmriData.updated_at) {
          const updateEl = document.getElementById('data-update-time');
          const prefix = currentLang === 'zh' ? 'æ•°æ®æ›´æ–°: ' : 'Data updated: ';
          updateEl.textContent = prefix + rawBmriData.updated_at;
        }
        
        // Store the data (keeping existing structure reference)
        bmriData = rawBmriData;
        
        // Try to load market cap data
        try {
          const mcapRes = await fetch('../indicators/data/marketcap.json');
          mcapData = await mcapRes.json();
        } catch (e) {
          console.log('Market cap data not available');
          mcapData = null;
        }
        
        updateDisplay();
      } catch (err) {
        console.error('Failed to load data:', err);
      }
    }

    // Init
    document.addEventListener('DOMContentLoaded', () => {
      const saved = localStorage.getItem('lang');
      if (saved) {
        currentLang = saved;
        updateLang();
      }
      loadData();
    });
  </script>
</body>
</html>
